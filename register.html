<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>🔥 Modern Social Login - Dark</title>

<!-- Remix Icon -->
<link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">

<style>
:root {
  --bg-dark: #121212;
  --card-dark: #1a1a1a;
  --text-color: #ffffff;
  --muted: #aaaaaa;
  --radius: 20px;
  --shadow: 0 15px 35px rgba(0,0,0,0.5);
}

/* Reset */
* { box-sizing: border-box; margin:0; padding:0; }

body {
  font-family: Inter, sans-serif;
  background: #121212;
  color: var(--text-color);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  overflow-x: hidden;
  position: relative;
}

/* Floating shapes */
.floating-shapes { position: absolute; inset: 0; overflow: hidden; z-index: 0; }
.shape { position: absolute; border-radius: 50%; opacity: 0.08; animation: float 12s linear infinite; }
.shape1 { width: 200px; height: 200px; background: #dd1ab3; top: 10%; left: 5%; }
.shape2 { width: 150px; height: 150px; background: #10a37f; top: 70%; right: 5%; animation-duration: 15s; }
@keyframes float { 0% {transform: translateY(0) rotate(0deg);} 50% {transform: translateY(-20px) rotate(180deg);} 100% {transform: translateY(0) rotate(360deg);} }

/* Auth card */
.auth-wrapper {
  background: #121212;
  border-radius: var(--radius);
  padding: 2rem 1.5rem;
  width: 100%;
  max-width: 380px;
  text-align: center;
  position: relative;
  z-index: 1;
}

/* Logo */
.logo img { height: 50px; margin-bottom: 1rem; }

/* Title/subtext */
h1 { font-size: 1.9rem; margin-bottom: 0.3rem; }
p.subtext { color: var(--muted); margin-bottom: 1.5rem; }

/* Social buttons grid */
.social-grid { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: auto auto; gap: 1rem; }
#google-btn { grid-column: 1; }
#facebook-btn { grid-column: 2; }
#apple-btn { grid-column: 1 / -1; justify-self: center; }

.social-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 10px 14px;
  border-radius: 15px;
  border: 1px solid #3333336c;
  background: #222;
  color: var(--muted);
  font-weight: 600;
  font-size: 1rem;
  cursor: pointer;
  position: relative;
  transition: all 0.3s ease;
}
.social-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}
.social-btn:hover:not(:disabled) { background: #4d4c4c; }
.social-btn i { font-size: 20px; }

/* Loader inside button */
.loader {
  border: 2px solid #fff;
  border-top: 2px solid transparent;
  border-radius: 50%;
  width: 16px;
  height: 16px;
  animation: spin 0.8s linear infinite;
  margin-left: 8px;
}
@keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }

@media(max-width:480px){
  .auth-wrapper { margin: 0 1rem; }
  .social-grid { grid-template-columns: 1fr; gap: 0.8rem; }
  #apple-btn { grid-column: 1; justify-self: center; }
}
</style>

<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";

const SUPABASE_URL = "https://jcrbwmpapgovyqaxajlb.supabase.co";
const SUPABASE_ANON_KEY =
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpjcmJ3bXBhcGdvdnlxYXhhamxiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcwNDc2NjAsImV4cCI6MjA3MjYyMzY2MH0.7jMgdHQGWfAsQ9b5C2gn8z7YqFLuA6gR_gIF0VIW56M";

const sb = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

async function handleLogin(button, provider) {
  const buttons = document.querySelectorAll(".social-btn");
  buttons.forEach((btn) => (btn.disabled = true));

  let loader = button.querySelector(".loader");
  if (!loader) {
    loader = document.createElement("span");
    loader.className = "loader";
    button.appendChild(loader);
  }

  try {
    const { error } = await sb.auth.signInWithOAuth({
      provider,
      options: {
        redirectTo: "https://stevenmsambwa8.github.io/vynal/dashboard.html",
      },
    });
    if (error) alert("❌ " + error.message);
  } catch (err) {
    console.error(err);
    alert("❌ Login failed. Please try again.");
    buttons.forEach((btn) => (btn.disabled = false));
    if (loader) loader.remove();
  }
}

window.addEventListener("DOMContentLoaded", () => {
  document
    .getElementById("google-btn")
    .addEventListener("click", (e) => handleLogin(e.currentTarget, "google"));
  document
    .getElementById("facebook-btn")
    .addEventListener("click", (e) =>
      handleLogin(e.currentTarget, "facebook")
    );
  document
    .getElementById("apple-btn")
    .addEventListener("click", (e) => handleLogin(e.currentTarget, "apple"));
});
</script>


</head>

<body>
<div class="auth-wrapper">
  <div class="logo"><img src="logo.png" alt="Logo"></div>
  <h1>Welcome</h1>
  <p class="subtext">Choose your social media to get started</p>

  <div class="social-grid">
    <button type="button" class="social-btn" id="google-btn">
      <i class="ri-google-fill"></i> Google
    </button>
    <button type="button" class="social-btn" id="facebook-btn">
      <i class="ri-facebook-circle-line"></i> Facebook
    </button>
    <button type="button" class="social-btn" id="apple-btn">
      <i class="ri-apple-fill"></i> Apple
    </button>
  </div>
</div>

<div class="floating-shapes">
  <div class="shape shape1"></div>
  <div class="shape shape2"></div>
</div>
</body>
</html>
